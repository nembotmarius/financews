version: '3'
services:
  prodfinancewseurekadiscovery:
    restart: on-failure
    container_name: prodfinancewseurekadiscovery
    build: ./financewseurekadiscovery
    ports:
      - "18761:18761"
    environment:
      server.port: '18761'

  prodfinancewsgatewayservice:
    restart: on-failure
    container_name: prodfinancewsgatewayservice
    build: ./financewsgatewayservice
    ports:
      - "18762:18762"
    depends_on:
      - prodfinancewseurekadiscovery
    links:
      - prodfinancewseurekadiscovery
    environment:
      server.port: '18762'
      eureka.client.enabled: 'true'
      eureka.host: prodfinancewseurekadiscovery
      eureka.instance.preferIpAddress: 'true'
      eureka.client.serviceUrl.defaultZone: 'http://prodfinancewseurekadiscovery:18761/eureka/'
      zuul.routes.financewssecurity.url: 'http://prodfinancewssecurityservice:18184'
      zuul.routes.financewsclient.url: 'http://prodfinancewsclientservice:18183'
      zuul.routes.financewsfrontoffice.url: 'http://prodfinancewsfrontofficeservice:18185'

  prodfinancewssecurityservice:
    restart: on-failure
    container_name: prodfinancewssecurityservice
    build: ./financewssecurityservice
    ports:
      - "18184:18184"
    depends_on:
      - prodfinancewseurekadiscovery
    links:
      - prodfinancewseurekadiscovery
    environment:
      server.port: '18184'
      eureka.client.enabled: 'true'
      eureka.host: prodfinancewseurekadiscovery
      eureka.instance.preferIpAddress: 'true'
      eureka.client.serviceUrl.defaultZone: 'http://prodfinancewseurekadiscovery:18761/eureka/'
      spring.jpa.properties.hibernate.default_schema: secu
      spring.datasource.hikari.connectionTimeout: 20000
      spring.datasource.hikari.maximumPoolSize: 5
      spring.datasource.url: jdbc:postgresql://164.68.106.161:5432/prod_socec
      spring.datasource.username: postgres
      spring.datasource.password: P@ssw0rd21

  prodfinancewsclientservice:
    restart: on-failure
    container_name: prodfinancewsclientservice
    build: ./financewsclientservice
    ports:
      - "18183:18183"
    depends_on:
      - prodfinancewseurekadiscovery
    links:
      - prodfinancewseurekadiscovery
    environment:
      server.port: '18183'
      eureka.client.enabled: 'true'
      eureka.host: prodfinancewseurekadiscovery
      eureka.instance.preferIpAddress: 'true'
      eureka.client.serviceUrl.defaultZone: 'http://prodfinancewseurekadiscovery:18761/eureka/'
      spring.jpa.properties.hibernate.default_schema: para
      spring.datasource.hikari.connectionTimeout: 20000
      spring.datasource.hikari.maximumPoolSize: 5
      spring.datasource.url: jdbc:postgresql://164.68.106.161:5432/prod_socec
      spring.datasource.username: postgres
      spring.datasource.password: P@ssw0rd21

  prodfinancewsfrontofficeservice:
    restart: on-failure
    container_name: prodfinancewsfrontofficeservice
    build: ./financewsfrontofficeservice
    ports:
      - "18185:18185"
    depends_on:
      - prodfinancewseurekadiscovery
    links:
      - prodfinancewseurekadiscovery
    environment:
      server.port: '18185'
      eureka.client.enabled: 'true'
      eureka.host: prodfinancewseurekadiscovery
      eureka.instance.preferIpAddress: 'true'
      eureka.client.serviceUrl.defaultZone: 'http://prodfinancewseurekadiscovery:18761/eureka/'
      spring.jpa.properties.hibernate.default_schema: frof
      spring.datasource.hikari.connectionTimeout: 20000
      spring.datasource.hikari.maximumPoolSize: 5
      spring.datasource.url: jdbc:postgresql://164.68.106.161:5432/prod_socec
      spring.datasource.username: postgres
      spring.datasource.password: P@ssw0rd21
